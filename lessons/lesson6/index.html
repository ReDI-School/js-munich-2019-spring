<html>

<head>
	<title>ReDI.js 6</title>
	<link rel="stylesheet" href="../../reveal.js/css/reveal.css">
	<link rel="stylesheet" href="../../reveal.js/css/theme/white.css">
	<link rel="stylesheet" href="../../reveal.js/lib/css/zenburn.css">
	<link rel="JavaScript" href="../../reveal.js/plugin/markdown/marked.js">
	<link rel="JavaScript" href="../../reveal.js/plugin/markdown/markdown.js">
	<style>
		.reveal pre {
				margin: 0;
		}

		.monospace {
				font-family: monospace !important;
		}

		.illustration {
				border: 0px
		}

		.reveal li {
				margin-bottom: 0.5em;
		}

		.reveal pre {
				width: 100%;
		}

		.reveal pre code {
				cursor: pointer;
		}

		.reveal li pre {
				width: fit-content;
		}

		.emphasis, .answer {
				color: orange;
				font-weight: bold;
		}

		.error {
			color: red;
		}

		.logo {
				position: fixed;
				/* Sit on top of the page content */
				z-index: 2;
				/* Specify a stack order in case you're using a different order for other elements */
		}

		.reveal table td {
				padding: 0.1em 0.25em 0.1em 0.25em;
				font-size: 0.8em;
		}

		.reveal table td pre code {
				max-height: none;
		}

		.reveal .slides section.smaller {
				font-size: 90%;
		}

		.reveal .slides section.even.smaller {
				font-size: 80%;
		}

		.reveal .slides section.smaller ul li {
				font-size: 90%;
				margin-bottom: 0.5em;
		}

		.reveal .slides section .smaller {
				font-size: 80% !important;
		}
	</style>
</head>

<body>
	<a href="https://www.redi-school.org/"><img src="../../redi-school-logo.jpg" class="logo" /></a>
	<div class="reveal">
		<div class="slides">
			<section>
				<h1>Intro to JavaScript</h1>
				<h3>üöÄ Lesson 6 üöÄ</h3>
			</section>

			<section class="smaller">
				<h3>Homework:</h3>
				<ul>
					<li>Get the JavaScript from <a href="hw.js">here</a> (click the link)</li>
					<li>Change it to
						<ul>
							<li>check the input (result of <code>prompt</code>) of the user</li>
							<li>if the input is not a valid (whole) number let the user retry without decreasing <code>lives</code></li>
							<li><b>Hint</b> The type of the input is always a <code>string</code>, so you need to think about how to test that this string correctly represents a whole number (example: <code>"23"</code> is valid while <code>"2e"</code> is not)</li>
						</ul>
					</li>
				</ul>
			</section>

			<section class="smaller">
				<h3>Solution</h3>
				<pre><code data-trim>
					let correctNumber = Math.floor(Math.random() * (10 + 1));

					function playRounds(lives) {
						if(lives === 0) {
							document.writeln('<h2 class="lose">You lose!</h2>');
							return;
						}

						let number = Number(prompt("Enter a value between 1 and 10"));
						if(isNaN(number)) {
							alert('Please enter a valid number!');
							playRounds(lives);
							return;
						}

						if (correctNumber === number) {
							document.writeln('<h2 class="win">You win!</h2>');
							return true;
						} else if (number > correctNumber) {
							alert("Sorry, too high.");
							playRounds(lives - 1);
						} else {
							alert("Sorry, too low.");
							playRounds(lives - 1);
						}
					}

					playRounds(3);
				</code></pre>
			</section>

			<section>
                <h2>Recap ü§ì üìñ</h2>
            </section>

            <section>
                <h3>Comments üóØ</h3>
                <ul>
                    <li class="fragment">Are <b>text</b> that you can add to your code to make it <b>easier to read</b></li>
                    <li class="fragment">They <b>do not do anything!</b> The browser ignores them completely.</li>
                    <li class="fragment">Examples:</li>
                    <pre class="fragment"><code data-trim>
                        // This is a single-line comment
                        someCode();
                        /* This is a
                        multiline comment! */
                        moreCode();
                        evenMoreCode(); // This a comment at the end of a normal line
                    </code></pre>
                </ul>
            </section>
            <section>
                <p>What does this do?</p>
                <pre><code data-trim>
                    alert("Hehe"); // This shows "Hehe"
                </code></pre>
            </section>
            <section>
                <p>What does this do?</p>
                <pre><code data-trim>
                    /*
                    alert("Hehe"); // This shows "Hehe"
                    */
                </code></pre>
			</section>
			
            <section>
                <h3>Functions</h3>
                <ul>
                    <li class="fragment">Are like <b>factories</b> üè≠</li>
                    <li class="fragment">You can <b>put in some stuff</b> <i>(arguments)</i> üì¶</li>
                    <li class="fragment">The factory <b>does something</b> <i>(function body)</i> ‚öôÔ∏è</li>
                    <li class="fragment">Then <b>outputs something else</b> <i>(return value)</i> Ô∏è‚õµÔ∏è</li>
                </ul>
            </section>
            <section>
                <h3>üì¶  ‚û° Ô∏èÔ∏èüè≠ ‚öô  ‚û° ‚õµÔ∏è</h3>
                <pre><code data-trim>
                    function buildShip(planks, sails) {
                        let ship = ...;

                        return ship;
                    }
                </code></pre>
                <p class="fragment">To call it:</p>
                <pre class="fragment"><code data-trim>
                    let myPlanks = ...;
                    let mySails = ...;
                    let myFirstShip = buildShip(myPlanks, mySails);
                </code></pre>
			</section>

			<section>
				<p>What does this do?</p>
				<pre><code data-trim>
					function myFunction(myArg) {
						alert("You ran myFunction with argument " + myArg);
					}
					let myArg = 'whoops';
				</code></pre>
			</section>
			<section>
				<p>What does this do?</p>
				<pre><code data-trim>
					function myFunction(myArg1, myArg2) {
						let myVar = (myArg1 + myArg2) / 2;
						// myVar = (myArg1 - myArg2) * 2;
						return myVar;
					}

					let x = myFunction(100, 150);

					alert("The answer is " + x);
				</code></pre>
			</section>
			
			<section>
				<h2>Scopes</h2>
				<ul>
					<li>between { and }, e.g. functions</li>
					<li>variables are only visible in scope</li>
				</ul>
				<pre class="fragment"><code data-trim>
					function f() {
						let inside = 2; // FUNCTION scope
					}
					f();
					alert(inside);
                </code></pre>
			</section>
			
			<section>
				<h2>Scopes</h2>
				<p>Global variables (not in scope) are visible in the <b>whole script</b>!</p>
				<pre><code data-trim>
					let global = 1;
					function f() {
						global = 2;
					}
					f();
					alert(global);
                </code></pre>
			</section>
			
			<section>
				<h2>Scopes</h2>
				<p>Arguments are in the function scope</p>
				<pre><code data-trim>
					function f(argument) {
						argument = 3;
					}
					f();
					alert(argument);
                </code></pre>
			</section>
			
			<section>
				<h2>Scopes</h2>
				<p>Arguments are in the function scope</p>
				<pre><code data-trim>
					let outside = 0;
					function f(argument) {
						argument = 1;
					}
					f(outside);
					alert(outside);
                </code></pre>
			</section>

			<section>
					<h2>Scopes</h2>
					<p>Arguments are in the function scope</p>
					<pre><code data-trim>
						let outside = 0;
						function f(argument) {
							argument = 1;
						}
						f(outside); // f(0)
						alert(outside);
					</code></pre>
				</section>

			<section>
				<h2>Scopes</h2>
				<p>Use the arguments!</p>
				<pre><code data-trim>
					// do something
					function printSum(a, b) {
						let sum = a + b;
						document.writeln('<h2>The sum of ' + a + ' and ' + b + ' is ' + sum + '</h2>');
					}
					printSum(2, 7);
					
					// produce something
					function sum(a, b) {
						return a + b
					}
					alert(sum(2, 7));
				</code></pre>
			</section>

			<section>
				<h2>Scopes</h2>
				<p>Different scopes!</p>
				<pre><code data-trim>
					let whatAmI = 0;
					function f(whatAmI) {
						whatAmI = 1;
					}
					f(whatAmI);
					alert(whatAmI);
				</code></pre>
			</section>

			<section>
				<h2>Scopes</h2>
				<p>Different scopes!</p>
				<pre><code data-trim>
					let whatAmI = 0;      // GLOBAL

					function f(whatAmI) { // FUNCTION SCOPE
						whatAmI = 1;  // FUNCTION SCOPE
					}
					f(whatAmI);           // GLOBAL
					alert(whatAmI);       // GLOBAL
				</code></pre>
			</section>

			<section>
                <h2>Exercise</h2>
                <p>The user should guess which animal you are thinking about!</p>
                <ul>
                    <li>Define a string variable with your favorite animal, e.g. "cat"</li>
                    <li>Ask the user to guess the animal via prompt()</li>
                    <li>Tell the user whether they guessed correctly or not!</li>
                    <li>Use 1-2 comments to describe your code</li>
                </ul>
            </section>
            <section>
                <h2>Solution</h2>
                <pre><code data-trim>
                    let favoriteAnimal = "Cat";

                    // Ask the user to guess my favorite color:
                    let guessedAnimal = prompt('Which animal is my favorite?');

                    // Check whether the user guessed correctly:
                    if (guessedAnimal === favoriteAnimal) {
                        alert("Wow! That's correct :)");
                    } else {
                        alert("Sorry! That's not my favorite animal... :(")
                    }
                </code></pre>
            </section>
			
			<section>
				<h1>More logic!</h1>
			</section>

			<section>
				<h3>Another datatype: <code>boolean</code></h3>
				<ul>
					<li class="fragment">
						In Boolean logic, a statement can be either <i>true</i> or <i>false</i>
					</li>
					<li class="fragment">
						For example: "It rains today".
					</li>
					<li class="fragment">
						Used in comparisons:
						<pre><code data-trim>
							if (x === 4) {
								doSomething();
							}
							if (x >= 7) {
								doSomethingElse();
							}
						</code></pre>
					</li>
				</ul>
			</section>
			<section>
				<h3>Another datatype: <code>boolean</code></h3>
				<p>Logical expressions are <code>boolean</code> values!</p>
				<pre><code data-trim>
					alert(typeof(true));
					alert(typeof(7 !== 8));
				</code></pre>
				<p class="fragment">You can also assign them to variables</p>
				<pre class="fragment"><code data-trim>
					let b = 3 < 7;
					alert(typeof(b))
				</code></pre>
				<p class="fragment">... and get even more crazy:</p>
				<pre class="fragment"><code data-trim>
					let fiveIsANumber = (typeof(5) === "number")
				</code></pre>
			</section>
			<section>
				<h3>Logical operators</h3>
				<ul>
					<li class="fragment">It rains today AND my feet are getting wet</li>
					<li class="fragment">It rains today OR my feet are getting wet</li>
					<li class="fragment">
						In JS:
						<pre><code data-trim>
							if (x === 4 || y > 0) {
								doSomething();
							}
						</code></pre>
					</li>
				</ul>
			</section>
			<section>
				<ul>
					<li>Often we need to express more complex logic than <br> x > y</li>
					<li class="fragment">We need to combine conditions together</li>
					<li class="fragment">AND: &&
						<ul>
							<li>Example: (x === 4 && y >= 1)</li>
						</ul>
					</li>

					<li class="fragment">OR: ||
						<ul>
							<li>Example: (x === 4 || y >= 1)</li>
						</ul>
					</li>
					<li class="fragment">NOT: !
						<ul>
							<li>Example: (x === 4 && !(y >= 1))</li>
						</ul>
					</li>
				</ul>
			</section>
			<section>
				<h3>&&</h3>
				<ul>
					<li>When the first expression AND the second expression both evaluate to <span class="emphasis">true</span></li>
					<li class="fragment">Example:
						<pre><code data-trim>
							let x = 4;
							let y = 1;

							alert(x === 4 && y === 1);
							alert(x === 3 && y === 1);
							alert(x === 1 && y === 0);
							</code></pre>
					</li>
				</ul>
			</section>
			<section>
				<h3>||</h3>
				<ul>
					<li>When either the first expression OR the second expression both evaluate to <span class="emphasis">true</span></li>
					<li class="fragment">Example:
						<pre><code data-trim>
							let x = 4;
							let y = 1;

							alert(x === 4 || y === 1);
							alert(x === 3 || y === 1);
							alert(x === 1 || y === 0);
						</code></pre>
					</li>
				</ul>
			</section>
			<section>
				<h3>!</h3>
				<ul>
					<li>
						When the containing expression is false then it is <span class="emphasis">true</span>. In other word it negates the result.</li>
					<li class="fragment">Example:
						<pre><code data-trim>
							let x = 4;
							let y = 1;

							alert(x === 4 && !(y === 1));
							alert(x === 3 && !(y === 1));
							alert(x === 1 && !(y === 0));
							alert(x === 4 && !(y === 0));
						</code></pre>
					</li>
				</ul>
			</section>

			<section>
				<h3>Guess the results:</h3>
				<ul>
					<li>
						<pre><code>alert(2 > 1 && 2 < 3);</code></pre>
					</li>
					<li class="fragment">
						<pre><code>alert(2 > 1 && 2 > 3);</code></pre>
					</li>
					<li class="fragment">
						<pre><code>alert(2 > 1 || 2 > 3);</code></pre>
					</li>
					<li class="fragment">
						<pre><code>alert(2 > 1 && !(2 > 1));</code></pre>
					</li>
				</ul>
			</section>
			<section>
				<h3>Exercise</h3>
				<ul>
					<li>Write a function <code>addPositiveNumbers</code> that takes two positive numbers and returns the sum.</li>
					<li>If any of the two numbers is less than 0, return -1.</li>
					<li>Call your function and display the result or an error message (if it returned -1, e.g. "Please only enter positive numbers!") in the <code>document</code></li>
				</ul>
			</section>
			<section>
				<h3>You can build it up</h3>
				<ul>
					<li class="fragment">
						<pre><code data-trim>
							if (x === 4 && (!(y === 1) || z === 0)) {
								doSomething();
							}
						</code></pre>
					</li>
					<li class="fragment">
						What is the result?
						<pre><code data-trim>
							let x = 3; let y = 9; let z = 9
							alert(y >= x || (x === y && y > z));
						</code></pre>
					</li>
					<li class="fragment">
						<pre><code data-trim>
							let x = 3; let y = 9; let z = 9
							alert((y >= x && y < z) && !(x === y && y > z));
						</code></pre>
					</li>
					<li class="fragment">
						<pre><code data-trim>
							let x = 3; let y = 9; let z = 9
							alert((y === x || y === z) && !(x === y && y > z));
						</code></pre>
					</li>
				</ul>
			</section>

			<section>
				<h1>When things don't work</h1>
				<ul>
					<li class="fragment">Code very seldom works on first run</li>
					<li class="fragment">Must learn to deal with bugs</li>
				</ul>
			</section>

			<section>
				<h1>Debugging</h1>
				<p class="fragment">Admiral Grace Hopper, 1940s</p>
				<img class="fragment illustration" style="max-height: 300px" src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ad/Commodore_Grace_M._Hopper%2C_USN_%28covered%29.jpg/1200px-Commodore_Grace_M._Hopper%2C_USN_%28covered%29.jpg" />
			</section>

			<section>
				<h3>Debugging</h3>
				<ul>
					<li>Mark II computer at Harvard University (for US Navy)</li>
					<li class="fragment">A moth stuck in a switch</li>
					<li class="fragment">Fixed the problem by "de-bugging"</li>
				</ul>
			</section>

			<section>
				<img src="https://upload.wikimedia.org/wikipedia/commons/8/8a/H96566k.jpg" class="illustration">
			</section>

			<section>
				<h3>Catching bugs</h3>
				<ul>
					<li class="fragment">Syntax highlighting</li>
					<li class="fragment">Console</li>
					<li class="fragment">Another pair of eyes (pair programming)</li>
					<li class="fragment">Take a break</li>
				</ul>
			</section>

			<section>
				<h3>DEBUG!</h3>
				<pre><code data-trim>
					let favoriteColor = 'blue';
					let color = prompt("Guess my favourite color:");
					if (color === favouriteColor) {
						alert("Correct!")
					}
				</code></pre>
			</section>

			<section>
				<h3>DEBUG!</h3>
				<pre><code data-trim>
					let favoriteColor = 'blue';
					let color = prompt("Guess my favorite color:");
					if (color === "favoriteColor") {
						alert("Correct!")
					}
				</code></pre>
			</section>

			<section>
				<h3>Common bugs</h3>
				<ul>
					<li class="fragment error">Uncaught ReferenceError: favouriteColor is not defined</li>
					<li class="fragment error">Syntax error</li>
					<li class="fragment error">Expected ( or Missing (</li>
					<li class="fragment error">...</li>					
				</ul>
				<h4 class="fragment">Many are obvious in the syntax highlighting in VS Code!</h4>
			</section>

			<section>
                <h3>console.log()</h3>
                <ul>
                    <li class="fragment">Prints something to the console in the browser</li>
                    <li class="fragment">Normal users of your website do not see it, unless they open the console</li>
                    <li class="fragment">Ideal to find out what's going on üòÖ</li>
                </ul>
			</section>
			
			<section>
				<h3>Where am I???</h3>
				<pre><code data-trim>
					function doComplicatedLogic(a, b) {
						let result = 5
						if(a < 7 && (b === 0 || b > 7)) {
							result += 2;
						} else {
							result += 3;
						}
						return result
					}
					alert(doComplicatedLogic(7, 8));
				</code></pre>
			</section>

			<section>
					<h3>Where am I???</h3>
					<p>Console outputs can help!</p>
					<pre><code data-trim>
						function doComplicatedLogic(a, b) {
							let result = 5
							if(a < 7 && (b === 0 || b > 7)) {
								console.log("I'm inside if!");
								result += 2;
							} else {
								console.log("I'm inside else!");
								result += 3;
							}
							return result
						}
						alert(doComplicatedLogic(7, 8));
					</code></pre>
				</section>

			<section class="smaller">
				<h3>Homework:</h3>
				<ul>
					<li>Get two numbers from the user with a prompt.</li>
					<li>REMEMBER: You have to convert the type of the result returned by the prompt.</li>
					<li>Write a function that returns <code>true</code> if both numbers have the same sign (meaning they are both positive or both negative).</li>
					<li>Use a complex logical expression with <code>&&</code> / <code>||</code>.</li>
					<li>Call the function and write the result to the document.</li>
				</ul>
			</section>
		</div>
	</div>

	<script src="../../jquery-3.3.1.slim.min.js"></script>
	<script src="../../reveal.js/lib/js/head.min.js"></script>
	<script src="../../reveal.js/js/reveal.js"></script>
	<script>
		Reveal.initialize({
			history: true,
			dependencies: [
				{ src: '../../reveal.js/plugin/highlight/highlight.js', async: false, callback: function () { hljs.initHighlightingOnLoad(); } },
			]
		});

		// Make each code example executable by clicking it:
		$(document).ready(function () {
			$('code').click(function (event) {
				console.info('Click!', $(this).text());
				eval($(this).text());
			});
		});
	</script>
</body>

</html>
